{% extends 'base.html' %}

{% block js %}

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.3/themes/base/jquery-ui.css" type="text/css" media="all" /> 
<link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css"
      type="text/css" media="all" /> 

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript" ></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.3/jquery-ui.min.js" type="text/javascript"></script>

<script src="http://jquery-ui.googlecode.com/svn/tags/latest/external/jquery.bgiframe-2.1.1.js" type="text/javascript"></script> 
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.3/i18n/jquery-ui-i18n.min.js" type="text/javascript"></script> 

<style type="text/css">

.grabber {
display: block;
width: 20px;
height: 20px;
border: #000 solid 3px;
background-color: #fcc;
}

#categories {
  float: left;
  width: 300px;
}

.category-icon {
  display: block;
  border: #000 solid 3px;
  width: 20px;
  height: 20px;
}

.eat-smart {
background-color: #f00;
}
.get-fit {
background-color: #0f0;
}
.look-sharp {
background-color: #00f;
}

#fridge {
  display: block;
  width: 300px;
  height: 600px;
  float: right;
  background-color: #fff;
  border: #000 solid 1px;
}

.ui-draggable-dragging {
  border: #f60 solid 2px;
}
.dropped {
border: #f00 solid 1px;
}
.arrow {
display: block;
width: 10px;
height: 10px;
}

.open {
background-color: green;
}

.closed {
background-color: red;
}

</style>

<script type="text/javascript">
var magnets = new Array();

var saveMagnets = function () {
   

};
</script>

{% endblock %}

{% block content %}

<h1>Health Habit Plan Exercise: Session {{session.number}}</h1>

<div id="hhp-container">

<table id="categories">
{% for category in categories %}
<tr class="category">
<td><span class="arrow closed"></span></td>
<td><span class="category-icon {{category.css}}"></span></td>
<th>{{category.label}}</a></th>
</tr>
    {% for item in category.item_set.all %}
<tr class="item">
<td></td>
<td><div id="item-{{item.id}}-grabber" class="grabber {{item.category.css}}"></div></td>
<td><p>{{item.label}}</p></td>
</tr>
    {% endfor %}
{% endfor %}
</table>

<div id="fridge">

</div>
</div>


<script type="text/javascript">

jQuery(document).ready(function(){
	jQuery('.category').click(function() {
		jQuery(this).nextUntil("tr.category").toggle();
                jQuery(this).find(".arrow").toggleClass("open");
                jQuery(this).find(".arrow").toggleClass("closed"); 
		return false;
	}).nextUntil("tr.category").hide();
});

jQuery(function() {
   jQuery(".grabber").draggable({
        revert: 'invalid'
        ,start: function(event, ui) {
           /* going to want to do some stuff here */
        }
   });

   jQuery("#fridge").droppable({
	drop: function(event, ui) {
	jQuery(this).addClass('dropped');
        saveMagnets();
	}
   }); 
});



</script>

{% endblock %}
